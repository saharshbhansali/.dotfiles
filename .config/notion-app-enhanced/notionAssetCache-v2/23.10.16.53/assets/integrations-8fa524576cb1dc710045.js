"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[801],{47836:(e,t,a)=>{a.r(t),a.d(t,{default:()=>U,LinkPreviewLab:()=>z});var r=a(67154),i=a.n(r),n=a(98135),o=a.n(n),s=(a(33948),a(5366)),l=a(67294),d=a.n(l),u=a(45016),c=a(43250),p=a(58879),g=a(89940),m=a(80574),v=a(27832),f=a(3403),b=a(29823),_=a(97812),y=a(97880),h=a(27748),x=a(89602),M=a(44876),F=a(65270),I=a(91996),S=a(82990),w=a(62727),k=a(14947),R=a(3779),Z=a(36054),T=a(30874),C=a(46167),B=a(47966),E=a(71202),P=a(25584),q=a(48762),A=a(83071),O=a(61766),V=a(64215),N=a(17970);function U(e){const t=(0,p.O7)(),{integrationPointer:a}=e,r=(0,g.VK)((()=>v.default.state.currentUserStore),[]),i=(0,g.VK)((()=>{if(r)return r.getRecordValue(a)}),[r,a]),n=(0,m.V)({value:i,waitTimeInMs:5e3});return"pending"===n.status?o()(f.Z,{}):"rejected"===n.status||"external"!==(null==n?void 0:n.value.type)?o()(b.Z,{}):o()(_.Z,{className:c.hE,title:o()(s.FormattedMessage,{id:"developerIntegrationLab.title.label",defaultMessage:"Link Preview Lab"}),subtitle:o()(s.FormattedMessage,{id:"developerIntegrationLab.subtitle.label",defaultMessage:"Plan out preview URL regex patterns and API responses."}),onNavigateBack:()=>(0,u.V2)(t,a),navigateBackMessage:o()(s.FormattedMessage,{id:"developerIntegrationLab.navigateBack.label",defaultMessage:"Back to integration"}),innerContainerStyles:{width:1200,margin:"auto",marginBottom:200}},void 0,o()(z,{starterIntegration:n.value}))}function z({starterIntegration:e}){const[t,a]=d().useState(""),[r,i]=d().useState(F.Az),[n,s]=d().useState(F.SV),[l,u]=d().useState(F.VR()),[c,p]=d().useState(F.nZ),[g,m]=d().useState(F.e_),[v,f]=d().useState(F.P4),[b,_]=d().useState(e);return d().useEffect((()=>{const{original_url_domains:t,original_url_patterns:a}=e.info;if(null!=t&&t[0]&&p(null==t?void 0:t[0]),null!=a&&a[0]){const{regex:e,attributes:t}=null==a?void 0:a[0];m(e);const r=t.map(M.Ah);f(r)}}),[e]),d().useEffect((()=>{_((e=>F.Hx({domain:c,regex:g,attributes:v,currentIntegration:e})))}),[c,g,v]),d().useEffect((()=>{T.Z.setState({loaded:!0,loading:!1,spaceId:F.C,integrations:[b],externalAuthentications:[],bots:[]})}),[b]),o()("div",{style:{display:"flex",justifyContent:"space-between"}},void 0,o()(L,{style:{flex:1,marginRight:12},setErrorMessage:a,rootUrl:r,setRootUrl:i,relatedUrisToAttributes:l,setRelatedUrisToAttributes:u,domain:c,setDomain:p,regexPattern:g,setRegexPattern:m,regexAttributes:v,setRegexAttributes:f,rootAttributes:n,setRootAttributes:s}),o()(W,{style:{flex:1},rootUrl:r,rootAttributes:n,relatedUrisToAttributes:l,integration:b,errorMessage:t}))}function L(e){const{style:t,rootUrl:a,setRootUrl:r,domain:i,setDomain:n,regexPattern:l,setRegexPattern:d,regexAttributes:u,setRegexAttributes:c,rootAttributes:p,setRootAttributes:m,relatedUrisToAttributes:v,setRelatedUrisToAttributes:f,setErrorMessage:b}=e,_=(0,g.VK)((()=>F.TG(p)),[p]);return o()("div",{style:t},void 0,o()("label",{},void 0,o()("div",{style:{fontSize:15,fontWeight:S.Z.fontWeight.medium}},void 0,o()(s.FormattedMessage,{id:"developerIntegrationLab.rootUrl.label",defaultMessage:"Pasted URL to Preview",description:"A url that the developers can test their integrations against as if a user attempted to unfurl it themselves."})),o()(w.Z,{value:a,onChange:e=>r(e.target.value)})),o()(K,{title:o()(s.FormattedMessage,{id:"developerIntegrationLab.regexConfiguration.label",defaultMessage:"Manage Regex Configuration",description:"Allows developers to test out regular expressions to match pasted unfurled urls."}),style:{marginTop:12}},void 0,o()("label",{style:{marginTop:12}},void 0,o()("div",{style:{fontSize:15,fontWeight:S.Z.fontWeight.medium}},void 0,o()(s.FormattedMessage,{id:"developerIntegrationLab.domain.label",defaultMessage:"Domain",description:"The domain of their integration (e.g. 'notion.so')."})),o()(w.Z,{value:i,onChange:e=>n(e.target.value)})),o()(j,{regexPattern:l,setRegexPattern:d,setErrorMessage:b}),o()("label",{style:{marginTop:12}},void 0,o()("div",{style:{fontSize:15,fontWeight:S.Z.fontWeight.medium}},void 0,o()(s.FormattedMessage,{id:"developerIntegrationLab.regexAttributes.label",defaultMessage:"Regex Attributes",description:"The matched attributes within their configuredregex patterns."})),o()(H,{value:u,onChange:c,validationType:x.$1,setErrorMessage:b}))),o()(K,{title:o()(s.FormattedMessage,{id:"developerIntegrationLab.rootAttributes.label",defaultMessage:"Unfurl response payload",description:"Allows developers to test their unfurl responses against our validator and visualizer."}),style:{marginTop:12}},void 0,o()(H,{value:p,onChange:m,validationType:x.$1,setErrorMessage:b})),o()(K,{title:o()(s.FormattedMessage,{id:"developerIntegrationLab.relatedAttributes.label",defaultMessage:"Related unfurl response payloads",description:"Allows developers to test additional unfurl responses against our validator and visualizer."}),style:{marginTop:12}},void 0,_.map((e=>{const t=v[e];return o()(K,{title:e,style:{marginTop:12,marginLeft:12}},void 0,t?o()(H,{value:t,onChange:t=>{f({...v,[e]:t})},validationType:x.$1,setErrorMessage:b}):o()(s.FormattedMessage,{id:"developerIntegrationLab.relatedAttributes.empty",defaultMessage:"No related attributes found."}))}))))}const D=["preview","mention"],G=["authenticate","error","update","loaded"];function W(e){const{style:t,rootUrl:a,rootAttributes:r,relatedUrisToAttributes:i,integration:n,errorMessage:s}=e,[l,u]=d().useState("preview"),[c,p]=d().useState("loaded");return o()("div",{style:t},void 0,o()("div",{style:{display:"flex",alignItems:"center"}},void 0,o()("div",{style:{marginRight:12}},void 0,"Preview type:"),o()(Y,{title:l,options:D,onSelectOption:e=>u(e)}),o()("div",{style:{marginLeft:12,marginRight:12}},void 0,"Preview state:"),o()(Y,{title:c,options:G,onSelectOption:e=>p(e)})),o()("div",{style:{marginTop:12,maxWidth:600}},void 0,o()(X,{previewType:l,previewState:c,rootUrl:a,rootAttributes:r,relatedUrisToAttributes:i,integration:n,errorMessage:s})))}function K(e){const[t,a]=d().useState(!1);return o()("div",{style:e.style},void 0,o()(k.Z,{onClick:()=>a(!t),style:{display:"flex",alignItems:"center"}},void 0,R.Z.triangle({width:"0.6875em",height:"0.6875em",transition:"transform 200ms ease-out",transform:"rotateZ(".concat(t?180:90,"deg)"),marginRight:4}),e.title),t&&e.children)}function H(e){const{value:t,onChange:a,validationType:r,setErrorMessage:i}=e,[n,s]=d().useState(JSON.stringify(t,null,2));return o()(w.Z,{format:w.B.ExtraLarge,inputStyle:{fontSize:14,lineHeight:"18px",height:500},textarea:!0,value:n,onChange:e=>{const t=e.target.value;s(t);const n=I.Jv(t);if(void 0===n)i("Could not parse JSON object input.");else{const e=(0,Z.Gu)(r,n);e?i(e.message):(i(""),a(n))}}})}function j(e){const{regexPattern:t,setRegexPattern:a,setErrorMessage:r}=e,[i,n]=d().useState(t);return o()("label",{style:{marginTop:12}},void 0,o()("div",{style:{fontSize:15,fontWeight:S.Z.fontWeight.medium}},void 0,"Regex Pattern"),o()(w.Z,{value:i,onChange:e=>{const t=e.target.value;n(t);try{new RegExp(t);a(t),r("")}catch(i){r("Invalid Regex.")}}}))}function Y(e){const{title:t,options:a,onSelectOption:r}=e,[n,s,l]=(0,g.oR)(void 0,O.Z);return o()(C.Z,{popupType:C.Z.PopupType.Popup,buttonPopupStore:l,renderOrigin:()=>o()(B.Z,{onClick:()=>s({...n,open:!0})},void 0,t,R.Z.chevronDown({width:10,marginTop:4,marginLeft:4})),render:()=>o()(E.ZP,{menuType:E.ZP.MenuType.Popup},void 0,o()(P.Z,{type:P.Z.Type.Vertical,sections:[{key:t,items:a.map((e=>({key:e,action:()=>{r(e),s({...n,open:!1})},render:t=>d().createElement(q.Z,i()({},t,{title:e}))}))),render:e=>d().createElement(A.Z,e)}],initialFocus:void 0}))})}function X(e){const{previewType:t,previewState:a,rootUrl:r,rootAttributes:i,relatedUrisToAttributes:n,integration:s,errorMessage:l}=e,[u,c]=d().useState(l),g=(0,p.O7)(),[m,v]=d().useState();d().useEffect((()=>{const e=F.rn({environment:g,rootUrl:r,rootAttributes:i,relatedUrisToAttributes:n,integration:s});"error"in e?c(e.error):(c(""),v(e))}),[g,r,i,n,s]);const f=(0,V.y)((e=>({error:{marginTop:12,marginBottom:12,padding:"12px 24px",marginRight:"auto",backgroundColor:e.accentColors.red[100]}})),[]);return d().createElement(d().Fragment,null,u&&o()("div",{style:f.error},void 0,u," "),m&&o()(J,{previewType:t,previewState:a,previewStores:m}))}function J(e){const{previewType:t,previewState:a,previewStores:r}=e;return"preview"===t?o()(h.Z,{store:"authenticate"===a?r.emptyInstanceBlockStore:r.previewBlockStore,disabled:!1,showAction:"loaded"===a?void 0:a}):"mention"===t?o()(N.Z,{store:"authenticate"===a?r.emptyInlineBlockStore:r.inlineBlockStore,disabled:!1}):void(0,y.t1)(t)}},29823:(e,t,a)=>{a.d(t,{Z:()=>c});var r=a(98135),i=a.n(r),n=(a(67294),a(43250)),o=a(97812),s=a(3779),l=a(45016),d=a(58879),u=a(5366);function c(){const e=(0,d.O7)();return i()(o.Z,{className:n.wG,title:i()(u.FormattedMessage,{id:"developerIntegrationNotFound.title.label",defaultMessage:"Not Found"}),subtitle:i()(u.FormattedMessage,{id:"developerIntegrationNotFound.subtitle.label",defaultMessage:"This integration doesn’t exist."}),onNavigateBack:()=>(0,l.A1)(e),icon:s.Z.eyes({width:98,height:98}),sideContent:null},void 0,null)}},59781:(e,t,a)=>{a.r(t),a.d(t,{default:()=>w});var r=a(98135),i=a.n(r),n=(a(33948),a(67294)),o=a(58879),s=a(45016),l=a(89940),d=a(27832),u=a(3403),c=a(97812),p=a(5366),g=a(43250),m=a(77420),v=a(40039),f=a(91149),b=a(9844),_=a(50906),y=a(56200),h=a(85227),x=a(70043),M=a(29823),F=a(80574),I=a(97880),S=a(49953);function w(e){const{botOrIntegrationPointer:t}=e,a=(0,o.O7)(),[{currentUserStore:r}]=(0,l.oR)(d.default),[,,w]=(0,l.oR)(void 0,h.Z),k=(0,l.Kw)(w),R=(0,l.VK)((()=>{if(t&&r){const e=t.table,a=r.getRecordValue(t);if(a){const i=e===b.K&&"external"===a.type&&r.getRecordValue({table:S.r,id:t.id});return{botOrIntegrationRecord:{value:a,table:t.table},maybeExternalAuthRecord:i?{table:S.r,value:i}:void 0}}}}),[r,t]);(0,n.useEffect)((()=>{if(!R)return;const{botOrIntegrationRecord:e,maybeExternalAuthRecord:t}=R;w.initializeNewForm(e,t),_.DUp(a,{table:e.table})}),[w,a,R]);const Z=(0,F.V)({value:k.startingRecord});if("rejected"===Z.status||!t)return i()(M.Z,{});if("pending"===Z.status)return i()(u.Z,{});"resolved"!==Z.status&&(0,I.t1)(Z);const T=Z.value,C=T.value.name,B=T.table===m.c?T.value.icon:T.value.info.icon,E={id:T.value.id,table:T.table},P=B?{pointer:E,icon:B}:void 0;return i()(c.Z,{className:g.TF,title:C,subtitle:i()(p.FormattedMessage,{id:"developerIntegrationView.subtitle.label",defaultMessage:"Review and edit integration information."}),onNavigateBack:()=>(0,s.A1)(a),icon:i()(v.Z,{disabled:!0,icon:P,title:C,isEmptyPage:!1,size:98,isLarge:!0,style:{boxShadow:x.Z.frontDeepShadow},useInvertedColors:!0}),sideContent:i()(y.T,{integrationFormStore:w})},void 0,i()(f.Z,{integrationFormStore:w}))}},8871:(e,t,a)=>{a.r(t),a.d(t,{default:()=>p});var r=a(98135),i=a.n(r),n=(a(33948),a(67294),a(97812)),o=a(5366),s=a(43250),l=a(91149),d=a(56200),u=a(89940),c=a(85227);function p(e){const{onClose:t,onSuccess:a}=e,[,,r]=(0,u.oR)(void 0,c.Z);return i()(n.Z,{className:s.Zp,title:i()(o.FormattedMessage,{id:"developerIntegrationsCreateInternal.title.label",defaultMessage:"Create a new integration"}),subtitle:i()(o.FormattedMessage,{id:"developerIntegrationsCreateInternal.subtitle.label",defaultMessage:"We’ll walk you through how to setup a new integration."}),onNavigateBack:t,sideContent:i()(d.T,{integrationFormStore:r})},void 0,i()(l.Z,{onCreateNew:a,integrationFormStore:r,shouldAutoFocusFirstField:!0}))}},91149:(e,t,a)=>{a.d(t,{Z:()=>ke});var r=a(67154),i=a.n(r),n=a(98135),o=a.n(n),s=(a(33948),a(73210),a(96486)),l=a(67294),d=a.n(l),u=a(5366),c=a(77420),p=a(9844),g=a(97880),m=a(89940),v=a(27832),f=a(90031),b=a(64442),_=a(3779),y=a(98481),h=a(42402),x=a(89101),M=a(8848),F=a(38381);function I(e){const{onSubmit:t,children:a,submitType:r,capabilitiesHaveChanged:i}=e,n="create-bot"===r||"create-guest-integration"===r||"create-external-integration"===r;return o()("form",{id:"developer-integration-form",style:{minWidth:200,maxWidth:440,marginLeft:24,display:"flex",flexDirection:"column"},onSubmit:e=>{e.preventDefault(),"create-guest-integration"===r?F.Z.setState({open:!0,isDestructive:!1,isWarning:!1,title:o()(u.FormattedMessage,{id:"developerIntegrationFormHandler.createIntegration.confirmationModal.title",defaultMessage:"Switch to Public integration?"}),message:o()(u.FormattedMessage,{id:"developerIntegrationFormHandler.createIntegration.confirmationModal.message",defaultMessage:"You‘ll get an OAuth secret and will need to implement OAuth for authorization. See <oauthdocumentationlink>developer docs</oauthdocumentationlink> for more information.",values:{oauthdocumentationlink:(...e)=>o()(h.Z,{href:x._j.developerOAuthDocs},void 0,e)}}),confirmationMessage:o()(u.FormattedMessage,{id:"developerIntegrationFormHandler.createIntegration.confirmationModal.confirm",defaultMessage:"Continue"}),onConfirm:()=>{t()}}):"update-guest-integration"===r&&i?F.Z.setState({open:!0,isDestructive:!1,isWarning:!0,title:o()(u.FormattedMessage,{id:"developerIntegrationFormHandler.updateIntegration.capabilities.confirmationModal.title",defaultMessage:"Change requested capabilities?"}),message:o()(u.FormattedMessage,{id:"developerIntegrationFormHandler.updateIntegration.capabilities.confirmationModal.message",defaultMessage:"Any existing users of your integration will be required to re-authenticate."}),confirmationMessage:o()(u.FormattedMessage,{id:"developerIntegrationFormHandler.updateIntegration.capabilities.confirmationModal.confirm",defaultMessage:"Change"}),onConfirm:()=>{t()}}):t()}},void 0,a,o()("div",{style:{display:"flex",marginTop:24,flexDirection:"row-reverse",alignItems:"center"}},void 0,o()(y.h,{onClick:()=>{const e=document.querySelector("form#developer-integration-form");if(e){const t=e.ownerDocument.createElement("input");t.style.display="none",t.type="submit",e.appendChild(t).click(),e.removeChild(t)}}},void 0,o()(S,{isCreate:n})),n&&o()("span",{style:{fontSize:15,color:M.ZP.frontTextLight,marginRight:42}},void 0,o()(u.FormattedMessage,{id:"developerIntegrationFormHandler.create.developerTerms",defaultMessage:"By submitting, you agree to Notion's <developertermslink>Developer Terms</developertermslink>.",values:{developertermslink:(...e)=>o()(h.Z,{href:x._j.developerTerms},void 0,e)}}))))}function S(e){const{isCreate:t}=e;return t?d().createElement(d().Fragment,null,o()("div",{style:{marginRight:4}},void 0,o()(u.FormattedMessage,{id:"formHandler.submitButton.create.label",defaultMessage:"Submit"})),_.Z.arrowRight({width:14,height:14})):o()(u.FormattedMessage,{id:"formHandler.submitButton.create.update",defaultMessage:"Save changes"})}var w=a(62727),k=a(58879),R=a(66055),Z=a(14947),T=a(37235),C=a(82990),B=a(74350);function E(e){const{fetchSecret:t,secretName:a,onCopy:r,onError:i,confirmationModalProps:n,hasSecretBeenViewed:s}=e,l=(0,k.O7)(),[u,c]=d().useState();return o()(w.Z,{type:u?"text":"password",disabled:!0,style:{fontFamily:C.Z.getCompositeFontFamily(B.SP).mono,color:M.ZP.frontTextMedium},inputStyle:u?{cursor:"text"}:void 0,value:u||" ".repeat(40),right:o()("div",{style:{display:"flex"}},void 0,o()("div",{style:{width:30,marginLeft:-30,height:24,backgroundImage:"linear-gradient(to left, #f7f7f3 20%, rgba(255, 255, 255, 0) 100%)",zIndex:1}}),u?o()(q,{secretName:a,onClick:()=>{r&&r(),(0,R.RD)({environment:l,stringValue:u,copiedMessage:R.tq.copiedToClipboard})}}):o()(P,{hasSecretBeenViewed:s,onClick:async()=>{const e=async()=>{const e=await t();"secret"in e?c(e.secret):i(e.error.body.message)};n?F.Z.setState({...n,open:!0,onConfirm:e}):await e()}}))})}function P(e){const{onClick:t,hasSecretBeenViewed:a}=e;return o()(Z.Z,{onClick:t,style:A.button},void 0,o()(u.FormattedMessage,a?{id:"formSecretShow.refreshSecret.label",defaultMessage:"Refresh"}:{id:"formSecretShow.showSecret.label",defaultMessage:"Show"}))}function q(e){const{onClick:t,secretName:a}=e,[r,n]=d().useState(!1),s=o()(u.FormattedMessage,r?{defaultMessage:"{secretName} copied",id:"formSecretShow.secretCopied.tooltip",description:"Tooltip shown when user copied integration secret to clipboard",values:{secretName:a}}:{defaultMessage:"Copy {secretName}",id:"formSecretShow.copySecret.tooltip",description:"Shortcut for copying a token from an integration management page; 'secretName' will be either 'secret' or 'token'",values:{secretName:a}});return o()(T.Z,{placement:T.Z.Placement.Top,renderTooltip:()=>s,render:e=>d().createElement(Z.Z,i()({onClick:e=>{e.preventDefault(),n(!0),setTimeout((()=>{n(!1)}),1500),t()}},e,{style:{...A.button,color:r?M.ZP.mediumTextColor:M.ZP.blue}}),o()(u.FormattedMessage,r?{id:"formSecretShow.copied.label",defaultMessage:"Copied"}:{id:"formSecretShow.copySecret.label",defaultMessage:"Copy"}))})}const A={button:{display:"inline-flex",alignItems:"center",fontFamily:C.Z.getCompositeFontFamily(B.SP).sans,borderRadius:3,padding:"0 6px",height:24,color:M.ZP.blue}};var O=a(58762),V=a(64215),N=a(14598),U=a(47966),z=a(46951);function L(e){const{options:t,value:a,setValue:r}=e;return o()("div",{style:{display:"flex",flexDirection:"column"}},void 0,t.map(((e,i)=>o()(D,{option:e,value:a,setValue:r,isFirst:0===i,isLast:i===t.length-1},e.key))))}function D(e){const{option:t,value:a,setValue:r,isFirst:i,isLast:n}=e,s=(0,V.y)((e=>({outliner:{display:"flex",flexDirection:"column",alignItems:"flex-start",height:"auto",padding:18,whiteSpace:"normal",fontSize:15,background:e.whiteButtonBackground,borderTopLeftRadius:i?3:0,borderTopRightRadius:i?3:0,borderBottomLeftRadius:n?3:0,borderBottomRightRadius:n?3:0,...!i&&{borderTop:void 0}}})),[i,n]);return o()(U.Z,{onClick:()=>r(t.key),style:s.outliner},void 0,o()(N.Z,{title:t.title,isSelected:a===t.key,onClick:()=>{}},t.key),o()(z.Z,{isMultiline:!0,isSecondaryColor:!0,style:{marginLeft:24,marginTop:-4,fontSize:15}},void 0,t.caption))}var G=a(48243),W=a(4637),K=a(53471),H=a(68932);function j(e){const{value:t,setValue:a,setError:r}=e,i=(0,k.O7)(),[n,s]=d().useState(!1);return d().createElement(d().Fragment,null,t&&o()(G.Z,{url:t,isAuthenticated:!1,stripGoogleIconQuery:!0,width:90,render:(e,t)=>o()("div",{style:{width:90,height:90}},void 0,o()(W.Z,{src:t,style:{width:90,height:90,objectFit:"cover",borderRadius:3}}))}),o()(U.Z,{isLarge:!0,style:{width:"fit-content",backgroundColor:"white"},onClick:()=>{(0,K.cR)({environment:i,onStart:()=>s(!0),bucket:"public",onError:e=>{r(e.message),s(!1)},onComplete:e=>{a(e[0]),s(!1)},accept:"image/*"})}},void 0,o()(u.FormattedMessage,{id:"formInputIcon.uploadButton.label",defaultMessage:"Upload image"}),n&&o()(H.Z,{style:{marginLeft:4}})))}var Y=a(66722),X=a(25584),J=a(71202),$=a(83071);function Q(e){const{value:t}=e,[a,r]=d().useState(!1),n=()=>r(!1);return o()(Y.GI,{popupType:Y.GI.PopupType.Popup,alignmentToOrigin:Y.GI.Alignment.Start,placementToOrigin:Y.GI.Placement.Bottom,originGap:2,sameWidthAsOrigin:!0,open:a,onDismiss:n,render:()=>d().createElement(te,i()({},e,{value:t,onClose:n})),origin:d().createElement(ee,i()({},e,{value:t,onClick:()=>r(!0)}))})}function ee(e){const{onClick:t,value:a,renderMenuItem:r}=e,i=(0,V.y)((e=>({dropdown:{background:e.whiteButtonBackground,border:"1px solid ".concat(e.outlineButtonBorder),borderRadius:3,height:32},expandIcon:{height:12,width:12,fill:e.lightIconColor}})),[]);return d().createElement(d().Fragment,null,r({item:a,focused:!1,onClick:t,style:i.dropdown,right:_.Z.expand(i.expandIcon)}))}function te(e){const{keyName:t,items:a,value:r,setValue:i,renderMenuItem:n,onClose:s}=e;let l=0;const u=a.map(((e,t)=>(e.id===(null==r?void 0:r.id)&&(l=t),{key:e.id,action:()=>{i(e),s()},render:t=>n({...t,item:e})})));return o()(J.ZP,{menuType:J.ZP.MenuType.Popup},void 0,o()(X.Z,{type:X.Z.Type.Vertical,initialFocus:l,sections:[{key:"form-input-section-".concat(t),items:u,render:e=>d().createElement($.Z,e)}]}))}var ae=a(38755),re=a(48762),ie=a(40039),ne=a(79029);const oe=d().forwardRef(((e,t)=>{const{item:a,...r}=e,n=(0,k.O7)(),s=(0,m.VK)((()=>a&&(0,ae.getSpaceIcon)(n,a)),[n,a]),l=(0,m.VK)((()=>a&&(0,ae.getSpaceName)(n,a)),[n,a]);return d().createElement(re.Z,i()({},r,{ref:t,title:a&&o()(ne.Z,{store:a}),icon:a&&o()(ie.Z,{disabled:!0,icon:s,title:l,isEmptyPage:!1,size:19})}))}));var se=a(50906),le=a(56200),de=a(81710);function ue(e){const{label:t,subtitle:a,caption:r,error:i,children:n}=e,s=(0,V.y)((()=>({label:{fontSize:15,fontWeight:C.Z.fontWeight.medium,color:M.ZP.frontTextMedium},subtitle:{fontSize:15,color:M.ZP.frontTextLight},caption:{fontSize:15,color:M.ZP.frontTextLight},error:{marginTop:4,fontSize:15,color:M.ZP.frontRed},field:{display:"grid",gridTemplateColumns:"1fr",gap:6,marginBottom:32}})),[]);return o()("label",{style:s.field},void 0,o()("div",{style:s.label},void 0,t),r&&o()("div",{style:s.caption},void 0,r),n,a&&o()("div",{style:s.subtitle},void 0,a),i&&o()("div",{style:s.error},void 0,i))}var ce=a(75246),pe=a(45016),ge=a(33665),me=a(47307),ve=a(43250),fe=a(719),be=a(85567),_e=a(95477),ye=a(74181),he=a(84619),xe=a(82970),Me=a(83328),Fe=a(91996);const Ie={token:function(e){const{currentValue:t,setErrorValue:a}=e,[{currentUserStore:r}]=(0,m.oR)(v.default),i=(0,k.O7)(),n=(0,m.VK)((()=>{if(!r||!t)return;if(t.value.parent_table!==ce.bx)return;const e=b.Z.createChildStore(r,{id:t.value.parent_id,table:t.value.parent_table});return(0,ae.getSpaceName)(i,e)}),[r,t,i]);if(!t)return null;return d().createElement(d().Fragment,null,o()(E,{fetchSecret:async()=>{const e=await O.getBotToken(i,{botId:t.value.id});return"success"===e.type?(se.Cm3(i,{table:t.table}),{secret:e.data.token}):{error:e}},secretName:o()(u.FormattedMessage,{id:"developerIntegrationForm.botToken.secretName",defaultMessage:"token"}),onCopy:()=>{se.IVn(i,{table:t.table,from:"developer-integrations-view"})},onError:a}),n&&o()("div",{style:{fontSize:15,color:M.ZP.frontTextLight}},void 0,o()(u.FormattedMessage,{id:"developerIntegrationForm.botToken.subtitle",defaultMessage:"Only works with the <bold>{spaceName}</bold> workspace. To change workspace, <developertermslink>create another integration</developertermslink>.",values:{spaceName:n,bold:(...e)=>o()("b",{},void 0,e),developertermslink:(...e)=>o()(h.Z,{href:x._j.myIntegrations},void 0,e)}})))},client_id:function(e){const{currentValue:t}=e,a=(0,k.O7)(),[r,n]=d().useState(!1);if(!t)return null;const s=o()(u.FormattedMessage,r?{defaultMessage:"ID copied",id:"developerIntegrationsForm.clientIdCopied.tooltip"}:{defaultMessage:"Copy client ID",id:"developerIntegrationsForm.copyClientId.tooltip"});return o()(w.Z,{type:"text",disabled:!0,style:{color:M.ZP.frontTextMedium,fontFamily:C.Z.getCompositeFontFamily(B.SP).mono},value:t.value.id,right:o()("div",{style:{display:"flex"}},void 0,o()("div",{style:{width:30,marginLeft:-30,height:24,backgroundImage:"linear-gradient(to left, #f7f7f3 20%, rgba(255, 255, 255, 0) 100%)",zIndex:1}}),o()(T.Z,{placement:T.Z.Placement.Top,renderTooltip:()=>s,render:e=>d().createElement(Z.Z,i()({onClick:e=>{e.preventDefault(),n(!0),setTimeout((()=>{n(!1)}),1500),(0,R.RD)({environment:a,stringValue:t.value.id,copiedMessage:R.tq.copiedLinkToClipboard})}},e,{style:{display:"inline-flex",alignItems:"center",borderRadius:3,padding:"0 6px",height:24,color:r?M.ZP.frontTextMedium:M.ZP.blue,fontFamily:C.Z.getCompositeFontFamily(B.SP).sans}}),o()(u.FormattedMessage,r?{id:"developerIntegrationsForm.copiedId.label",defaultMessage:"Copied"}:{id:"developerIntegrationsForm.copyId.label",defaultMessage:"Copy"}))}))})},client_secret:function(e){const{currentValue:t,setErrorValue:a}=e,r=(0,k.O7)(),[{currentUserStore:i}]=(0,m.oR)(v.default);if(!t||!i)return null;const n=t.value.info.has_viewed_secret,s=(0,f.Kv)(i,{id:t.value.id,table:p.K});return o()(E,{fetchSecret:async()=>{const e=await O.getIntegrationSecret(r,{integrationId:t.value.id});return"success"===e.type?((0,pe.bO)({environment:r,integrationStore:s}),se.Cm3(r,{table:t.table}),{secret:e.data.secret}):{error:e}},secretName:o()(u.FormattedMessage,{id:"developerIntegrationForm.integrationSecret.secretName",defaultMessage:"secret"}),onCopy:()=>{se.IVn(r,{table:t.table,from:"developer-integrations-view"})},onError:a,hasSecretBeenViewed:n,confirmationModalProps:{isDestructive:!1,isWarning:!1,title:o()(u.FormattedMessage,n?{id:"developerIntegrationForm.clientSecret.confirmationModal.title",defaultMessage:"Refresh OAuth client secret?"}:{id:"developerIntegrationForm.clientSecret.confirmationModal.title",defaultMessage:"Show OAuth client secret?"}),message:o()(u.FormattedMessage,n?{id:"developerIntegrationForm.clientSecret.confirmationModal.message",defaultMessage:"You’ve already viewed the client secret. Viewing again will revoke and generate a new one. Make sure you’re storing the secret securely."}:{id:"developerIntegrationForm.clientSecret.confirmationModal.message",defaultMessage:"This client secret will only be displayed once and cannot be viewed again. Make sure you’re storing the secret securely."}),confirmationMessage:o()(u.FormattedMessage,{id:"developerIntegrationForm.clientSecret.confirmationModal.confirm",defaultMessage:"Continue"})}})},name:Se,icon:function(e){const{currentValue:t,setNewValue:a,setErrorValue:r}=e;return o()(j,{value:t,setValue:a,setError:r})},space:we,developer_space:we,submission_type:function(e){const{currentValue:t,setNewValue:a,formStoreState:r}=e,i=(0,k.O7)(),n={internal:{title:o()(u.FormattedMessage,{id:"developerInternalIntegration.integrationType.internal.title",defaultMessage:"Internal integration"}),caption:o()(u.FormattedMessage,{id:"developerInternalIntegration.integrationType.internal.caption",defaultMessage:"Only available for workspaces you’re an admin of. The integration can be installed to those workspaces automatically and does not require review."})},public:{title:o()(u.FormattedMessage,{id:"developerInternalIntegration.integrationType.public.title",defaultMessage:"Public integration"}),caption:o()(u.FormattedMessage,{id:"developerInternalIntegration.integrationType.public.caption",defaultMessage:"Available for any Notion user. May require review and verification for listing in the Integration Gallery."})},unfurling:{title:o()(u.FormattedMessage,{id:"developerInternalIntegration.integrationType.unfurling.title",defaultMessage:"Unfurling integration"}),caption:o()(u.FormattedMessage,{id:"developerInternalIntegration.integrationType.unfurling.caption",defaultMessage:"Available for any Notion user. May require review and verification for listing in the Integration Gallery."})}};if(!t)return null;let s;"update-bot"===r.type||"create-guest-integration"===r.type?s=[{...n.internal,key:"internal"},{...n.public,key:"public"}]:"create-bot"!==r.type&&"create-external-integration"!==r.type||(s=[{...n.internal,key:"internal"},{...n.unfurling,key:"unfurling"}]);if(!s)return null;return o()(L,{options:s,value:t,setValue:e=>{a(e),se.kXt(i,{table:"internal"===e?c.c:p.K})}})},redirect_uris:function(e){const{currentValue:t,setNewValue:a}=e,r=t||[],[n,s]=d().useState(""),l=()=>s("");return o()(Y.ZP,{popupType:Y.ZP.PopupType.Popup,sameWidthAsOrigin:!0,open:n.length>0,onDismiss:l,origin:o()(fe.Z,{style:{background:M.ZP.white,minHeight:32,fontSize:15},placeholder:"",value:n,onChange:e=>s(e.target.value),tokens:r.map((e=>o()(be.Z,{format:he.l.Medium,showRemoveButton:!0,isSingle:!1,value:e,onClickRemove:()=>{a(r.filter((t=>t!==e)))}},e))),onRemoveLastToken:()=>{r.length>0&&a(r.slice(0,r.length-1))}}),render:()=>{const e=n.trim(),t=(0,ye.ue)(_e.default.domainBaseUrl,e).map((e=>({key:e,render:t=>d().createElement(re.Z,i()({},t,{title:e})),action:()=>{l(),a([...r,e])}})));return o()(J.ZP,{menuType:J.ZP.MenuType.Popup},void 0,o()(X.Z,{type:X.Z.Type.Vertical,initialFocus:0,sections:[{key:"valid-redirect-uri-suggestion",items:t,render:e=>d().createElement($.Z,i()({},e,{title:o()(u.FormattedMessage,{id:"developerIntegrationsForm.redirectUri.typePrompt",defaultMessage:"Type a redirect uri…"})}))}]}))}})},website_url:Se,tagline:Se,privacy_policy_url:Se,terms_of_use_url:Se,email:Se,capabilities:function(e){const{currentValue:t,setNewValue:a}=e;return o()(X.Z,{type:X.Z.Type.Vertical,initialFocus:void 0,sections:[{key:"content_capabilities",items:[{key:"read_content",action:()=>null,render:e=>{const r=()=>{a(t?{...t,read_content:!t.read_content}:{read_content:!0,update_content:!1,insert_content:!1,read_user_without_email:!1,read_user_with_email:!1})};return d().createElement(re.Z,i()({},e,{title:o()(u.FormattedMessage,{id:"developerIntegrationForm.capabilities.read_content.title",defaultMessage:"Read content"}),caption:o()(u.FormattedMessage,{id:"developerIntegrationForm.capabilities.read_content.caption",defaultMessage:"Request to read content."}),icon:o()(xe.Z,{checked:Boolean(null==t?void 0:t.read_content),size:16,onClick:r}),onClick:r}))}},{key:"update_content",action:()=>null,render:e=>{const r=()=>{a(t?{...t,update_content:!t.update_content}:{read_content:!1,update_content:!0,insert_content:!1,read_user_without_email:!1,read_user_with_email:!1})};return d().createElement(re.Z,i()({},e,{title:o()(u.FormattedMessage,{id:"developerIntegrationForm.capabilities.update_content.title",defaultMessage:"Update content"}),caption:o()(u.FormattedMessage,{id:"developerIntegrationForm.capabilities.update_content.caption",defaultMessage:"Request to update existing content."}),icon:o()(xe.Z,{checked:Boolean(null==t?void 0:t.update_content),size:16,onClick:r}),onClick:r}))}},{key:"insert_content",action:()=>null,render:e=>{const r=()=>{a(t?{...t,insert_content:!t.insert_content}:{read_content:!1,update_content:!1,insert_content:!0,read_user_without_email:!1,read_user_with_email:!1})};return d().createElement(re.Z,i()({},e,{title:o()(u.FormattedMessage,{id:"developerIntegrationForm.capabilities.insert_content.title",defaultMessage:"Insert content"}),caption:o()(u.FormattedMessage,{id:"developerIntegrationForm.capabilities.insert_content.caption",defaultMessage:"Request to create new content."}),icon:o()(xe.Z,{checked:Boolean(null==t?void 0:t.insert_content),size:16,onClick:r}),onClick:r}))}}],render:e=>d().createElement($.Z,i()({},e,{title:o()(u.FormattedMessage,{id:"developerIntegrationForm.capabilities.content_capabilities.title",defaultMessage:"Content Capabilities"})}))},{key:"user_capabilities",items:[{key:"no_user_capabilities",action:()=>null,render:e=>d().createElement(re.Z,i()({},e,{title:o()(u.FormattedMessage,{id:"developerIntegrationForm.capabilities.no_user_capabilities.title",defaultMessage:"No user information"}),caption:o()(u.FormattedMessage,{id:"developerIntegrationForm.capabilities.no_user_capabilities.caption",defaultMessage:"Do not request any user information access."}),icon:o()(Me.Z,{isSelected:!Boolean((null==t?void 0:t.read_user_without_email)||(null==t?void 0:t.read_user_with_email))}),onClick:()=>{a(t?{...t,read_user_without_email:!1,read_user_with_email:!1}:{read_content:!1,update_content:!1,insert_content:!1,read_user_without_email:!1,read_user_with_email:!1})}}))},{key:"read_user_without_email",action:()=>null,render:e=>d().createElement(re.Z,i()({},e,{title:o()(u.FormattedMessage,{id:"developerIntegrationForm.capabilities.read_user_without_email.title",defaultMessage:"Read user information without email addresses"}),caption:o()(u.FormattedMessage,{id:"developerIntegrationForm.capabilities.read_user_without_email.caption",defaultMessage:"Request access to user information, not including email addresses."}),icon:o()(Me.Z,{isSelected:(null==t?void 0:t.read_user_without_email)&&!(null!=t&&t.read_user_with_email)||!1}),onClick:()=>{a(t?{...t,read_user_without_email:!0,read_user_with_email:!1}:{read_content:!1,update_content:!1,insert_content:!1,read_user_without_email:!0,read_user_with_email:!1})}}))},{key:"read_user_with_email",action:()=>null,render:e=>d().createElement(re.Z,i()({},e,{title:o()(u.FormattedMessage,{id:"developerIntegrationForm.capabilities.read_user_with_email.title",defaultMessage:"Read user information including email addresses"}),caption:o()(u.FormattedMessage,{id:"developerIntegrationForm.capabilities.read_user_with_email.caption",defaultMessage:"Request access to user information, including email addresses."}),icon:o()(Me.Z,{isSelected:(null==t?void 0:t.read_user_with_email)||!1}),onClick:()=>{a(t?{...t,read_user_without_email:!0,read_user_with_email:!0}:{read_content:!1,update_content:!1,insert_content:!1,read_user_without_email:!0,read_user_with_email:!0})}}))}],render:e=>d().createElement($.Z,i()({},e,{title:o()(u.FormattedMessage,{id:"developerIntegrationForm.capabilities.user_capabilities.title",defaultMessage:"User Capabilities"})}))}]})},developer_name:Se,unfurl_url:Se,domain:Se,regex_pattern:Se,regex_attributes:function(e){const{currentValue:t,setNewValue:a,setErrorValue:r}=e,[i,n]=d().useState("");return d().useEffect((()=>{n(JSON.stringify(t,null,2))}),[t]),o()(w.Z,{format:w.B.ExtraLarge,inputStyle:{fontSize:14,lineHeight:"18px",height:300},textarea:!0,value:i,onChange:e=>{const t=e.target.value;n(t);const i=(0,Fe.Jv)(t);void 0===i?r(o()(u.FormattedMessage,{id:"developerIntegrationForm.jsonEditor.error",defaultMessage:"Invalid JSON."})):a(i)}})},external_oauth_authorize_url:Se,external_oauth_token_url:Se,external_client_id:Se,external_client_secret:function(e){const{autoFocus:t,currentValue:a,setNewValue:r}=e;return o()(w.Z,{type:"password",autoFocus:t,style:{background:M.ZP.white,height:32,fontSize:15},value:a,onChange:e=>r(e.target.value)})},external_oauth_scopes:Se};function Se(e){const{autoFocus:t,currentValue:a,setNewValue:r}=e;return o()(w.Z,{autoFocus:t,style:{background:M.ZP.white,height:32,fontSize:15},value:a,onChange:e=>r(e.target.value)})}function we(e){const{spaces:t,currentValue:a,setNewValue:r,setErrorValue:i}=e,[n,s]=d().useState(!1);return(0,l.useEffect)((()=>{n||0!==t.length||(s(!0),i(o()(u.FormattedMessage,{id:"developerIntegrationsForm.spacePicker.missingSpacesError",defaultMessage:"You are not an admin of any workspaces. Please <linktonotion>create a new one</linktonotion> or ask your workspace admin to update your access.",values:{linktonotion:(...e)=>o()(h.Z,{href:(0,ge.UY)("guides.joinOrCreateWorkspace")},void 0,e)}})))}),[t,i,n]),o()(Q,{keyName:"space",items:t,value:a,setValue:r,renderMenuItem:e=>d().createElement(oe,e)})}const ke=(0,u.injectIntl)((function(e){var t;const{intl:a,integrationFormStore:r,onCreateNew:i,shouldAutoFocusFirstField:n}=e,c=(0,k.O7)(),[{currentUserRootStore:p}]=(0,m.oR)(v.default),f=(0,m.Kw)(r),{type:b}=f,_=(0,m.VK)((()=>(0,de.fY)()),[]),y=(0,m.VK)((()=>(0,de.Le)(r.getState().startingRecord)),[r]),[h,x]=d().useReducer(de.x6,de.yb);(0,l.useEffect)((()=>{if(!p)return;const e=(0,de.hl)({formStoreState:f,userRootStore:p});for(const t of(0,g.Yd)(e))x({field:t,value:e[t]})}),[f,p]);const M=(0,m.VK)((()=>p?p.getAdminSpaceStores():[]),[p]),F=s.debounce((()=>{const e=(0,de.Xk)({formData:h,formStateType:b});e.forEach((e=>{x({field:e,error:o()(u.FormattedMessage,{id:"developerIntegrationsForm.error.missingRequired",defaultMessage:"{ fieldName } is required.",values:{fieldName:_[e].label}})})}));const t=(0,de.bd)({formData:h,formStateType:b});t.forEach((e=>{x({field:e.fieldName,error:e.errorMessage?a.formatMessage(e.errorMessage):o()(u.FormattedMessage,{id:"developerIntegrationsCreateInternal.error.invalidInput",defaultMessage:"{ fieldName } is invalid.",values:{fieldName:_[e.fieldName].label}})})}));if(e.length>0||t.length>0||(0,de.tm)({formData:h,formStateType:b})||!p)return;const r=(0,pe.JJ)({environment:c,formState:f,formData:(0,de.Xr)(h)});if(!r)return void me.showErrorMessage(o()(u.FormattedMessage,{id:"developerIntegrationsForm.error.submission",defaultMessage:"There was an error submitting your integration. Please try again or contact support if the issue persists."}));i&&i(r);const n=document.querySelector(".".concat(ve.rI));n&&n.scrollIntoView({behavior:"smooth"})}),300),S="on"===(0,k.aq)("granular-bot-capabilities"),w=function(e,t){if(e&&t)for(const[a,r]of(0,g.qP)(t))if(Boolean(e[a])!==r)return!0;return!1}(null===(t=f.startingRecord)||void 0===t?void 0:t.value.capabilities,h.capabilities.value);return o()(I,{submitType:b,onSubmit:F,capabilitiesHaveChanged:w},void 0,de.cW.map((e=>y[e].supportedBy[b]?o()("div",{style:{marginBottom:24}},e,o()(le.e,{keyName:e,integrationFormStore:r}),y[e].fields.map((e=>{const{supportedBy:t,label:a,subtitle:i,caption:s}=_[e];if(t[b]&&("capabilities"!==e||S)){const t=Ie[e];return o()(ue,{label:a,subtitle:i,caption:s,error:h[e].error},e,o()(t,{autoFocus:Boolean(n&&"name"===e),spaces:M,currentValue:h[e].value,setErrorValue:t=>{x({field:e,error:t})},setNewValue:t=>{"submission_type"!==e?"client_secret"!==e&&"token"!==e&&x({value:t,field:e}):r.updateRecordTypeOnSubmission(t)},formStoreState:f}))}return null}))):null)))}))},56200:(e,t,a)=>{a.d(t,{e:()=>g,T:()=>m});var r=a(98135),i=a.n(r),n=(a(33948),a(67294)),o=a.n(n),s=a(8848),l=a(82990),d=a(81710),u=a(89940),c=a(42001);function p(e){return"developer-integration-section-header-".concat(e)}function g(e){const{keyName:t,integrationFormStore:a}=e,r=(0,u.VK)((()=>(0,d.Le)(a.getState().startingRecord)),[a]),{title:n,subtitle:o}=r[t];return i()("div",{id:p(t),style:{fontSize:30,fontWeight:l.Z.fontWeight.bold,marginTop:24,marginBottom:24}},void 0,n,o&&i()("div",{style:{fontSize:15,color:s.ZP.frontTextLight}},void 0,o))}function m(e){const{integrationFormStore:t}=e,{type:a}=(0,u.Kw)(t),r=(0,u.VK)((()=>(0,d.Le)(t.getState().startingRecord)),[t]),n=d.cW.filter((e=>r[e].supportedBy[a])),[g,m]=o().useState(),v=g||n[0];return i()("div",{style:{display:"grid",gridTemplate:"none | auto | auto",marginTop:24,position:"sticky",top:16}},void 0,n.map((e=>i()("div",{},e,i()(c.Z,{style:{fontSize:15,height:28,marginTop:4,color:s.ZP.frontTextLight,width:"100%",...v===e&&{color:s.ZP.frontText,fontWeight:l.Z.fontWeight.medium}},onClick:()=>{const t=document.getElementById(p(e));t&&t.scrollIntoView(),m(e)}},void 0,r[e].title)))))}},719:(e,t,a)=>{a.d(t,{Z:()=>v});var r=a(67154),i=a.n(r),n=a(98135),o=a.n(n),s=a(59713),l=a.n(s),d=(a(33948),a(67294)),u=a.n(d),c=a(66832),p=a(62727),g=a(98742);class m extends c.Z{constructor(...e){super(...e),l()(this,"handleKeyDown",(e=>{"Backspace"===e.key&&0===this.props.value.length&&this.props.onRemoveLastToken()}))}renderComponent(){const{device:e}=this.environment;return o()("div",{onClick:this.props.onClick,style:e.isMobile?this.getMobileWrapStyle():this.getDesktopWrapStyle()},void 0,this.props.tokens,this.renderInput())}renderInput(){const{device:e}=this.environment,t=0===this.props.tokens.length;return u().createElement(p.Z,i()({format:p.Z.Format.Transparent},(0,g.Z)({onKeyDown:this.handleKeyDown},{onChange:this.props.onChange}),{value:this.props.value,onSubmit:this.props.onSubmit,onBlur:this.props.onBlur,focus:this.props.focus,style:{...m.inputStyle,margin:e.isMobile?"0 8px 8px 0":"0 6px 6px 0"},readOnly:this.props.readOnly,inputStyle:{height:18},size:1,type:this.props.type,placeholder:t?this.props.placeholder:"",autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:!1}))}getDesktopWrapStyle(){return{display:"flex",flexWrap:"wrap",alignItems:"flex-start",minHeight:32,boxShadow:this.theme.inputBoxShadow,background:this.theme.inputBackground,borderRadius:3,fontSize:14,cursor:"text",overflow:"hidden",padding:"7px 9px 0px",...this.props.style}}getMobileWrapStyle(){return{...this.getDesktopWrapStyle(),fontSize:14,padding:"7px 10px 0"}}}l()(m,"inputStyle",{flexGrow:1,flexShrink:1,flexBasis:60,minWidth:60,width:"auto",lineHeight:"20px"});const v=m},81710:(e,t,a)=>{a.d(t,{cW:()=>b,Le:()=>_,fY:()=>y,yb:()=>x,x6:()=>M,hl:()=>F,Xk:()=>I,bd:()=>S,tm:()=>w,Xr:()=>Z});var r=a(98135),i=a.n(r),n=(a(33948),a(67294),a(5366)),o=a(9844),s=a(64442),l=a(97880),d=a(75246),u=a(33728),c=a(42402),p=a(70764),g=a(44876),m=a(91996),v=a(45016),f=a(65270);const b=["secrets","basic","oauth","organization","external_oauth","unfurling"];function _(e){return{secrets:{title:i()(n.FormattedMessage,{id:"developerIntegrationForm.sectionHeader.secrets",defaultMessage:"Secrets"}),supportedBy:{"create-bot":!1,"update-bot":!0,"create-guest-integration":!0,"update-guest-integration":!0,"create-external-integration":!1,"update-external-integration":!0},fields:["token","client_id","client_secret"]},basic:{title:i()(n.FormattedMessage,{id:"developerIntegrationForm.sectionHeader.basic",defaultMessage:"Basic Information"}),supportedBy:{"create-bot":!0,"update-bot":!0,"create-guest-integration":!0,"update-guest-integration":!0,"create-external-integration":!0,"update-external-integration":!0},fields:["name","icon","space","developer_space","submission_type","capabilities"]},oauth:{title:i()(n.FormattedMessage,{id:"developerIntegrationForm.sectionHeader.oauth",defaultMessage:"OAuth Domain & URIs"}),supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-external-integration":!1,"update-external-integration":!1},fields:["redirect_uris","developer_name","website_url","tagline","privacy_policy_url","terms_of_use_url","email"]},organization:{title:i()(n.FormattedMessage,{id:"developerIntegrationForm.sectionHeader.links",defaultMessage:"Organization Information"}),supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-external-integration":!0,"update-external-integration":!0},fields:["developer_name","website_url","tagline","privacy_policy_url","terms_of_use_url","email"]},external_oauth:{title:i()(n.FormattedMessage,{id:"developerIntegrationForm.sectionHeader.external_oauth",defaultMessage:"External Authorization Setup"}),subtitle:i()(n.FormattedMessage,{id:"developerIntegrationForm.sectionSubtitle.external_oauth",defaultMessage:"See the <textlink>official IETF spec</textlink> for information on OAuth 2.0.",values:{textlink:(...e)=>i()(c.Z,{href:"https://datatracker.ietf.org/doc/html/rfc6749",external:!0},void 0,e)}}),supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-external-integration":!0,"update-external-integration":!0},fields:["external_oauth_authorize_url","external_oauth_token_url","external_client_id","external_client_secret","external_oauth_scopes"]},unfurling:{title:i()(n.FormattedMessage,{id:"developerIntegrationForm.sectionHeader.unfurling",defaultMessage:"Unfurling Domain & Patterns"}),subtitle:i()(n.FormattedMessage,{id:"developerIntegrationForm.sectionCaption.unfurling",defaultMessage:"Visit the <previewlab>Link Preview Lab</previewlab> to plan out unfurling previews and responses.",values:{previewlab:(...t)=>{let a="";return(null==e?void 0:e.table)===o.K&&(a=(0,v.Pk)({table:e.table,id:e.value.id})),i()(c.Z,{href:a,external:!0},void 0,t)}}}),supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-external-integration":!1,"update-external-integration":!0},fields:["unfurl_url","domain","regex_pattern","regex_attributes"]}}}function y(){const e=(0,p.QS)();return{token:{supportedBy:{"create-bot":!1,"update-bot":!0,"create-guest-integration":!0,"update-guest-integration":!1,"create-external-integration":!1,"update-external-integration":!1},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-external-integration":!1,"update-external-integration":!1},label:i()(n.FormattedMessage,{id:"developerIntegrationForm.botToken.label",defaultMessage:"Internal Integration Token"})},client_id:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!0,"create-external-integration":!1,"update-external-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-external-integration":!1,"update-external-integration":!1},label:i()(n.FormattedMessage,{id:"developerIntegrationForm.integrationClientId.label",defaultMessage:"OAuth client ID"})},client_secret:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!0,"create-external-integration":!1,"update-external-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-external-integration":!1,"update-external-integration":!1},label:i()(n.FormattedMessage,{id:"developerIntegrationForm.integrationSecret.label",defaultMessage:"OAuth client secret"})},name:{supportedBy:{"create-bot":!0,"update-bot":!0,"create-guest-integration":!0,"update-guest-integration":!0,"create-external-integration":!0,"update-external-integration":!0},requiredBy:{"create-bot":!0,"update-bot":!0,"create-guest-integration":!0,"update-guest-integration":!0,"create-external-integration":!0,"update-external-integration":!0},label:i()(n.FormattedMessage,{id:"developerIntegrationForm.name.label",defaultMessage:"Name"}),subtitle:i()(n.FormattedMessage,{id:"developerIntegrationForm.name.subtitle",defaultMessage:"Name to identify your integration to users."})},icon:{supportedBy:{"create-bot":!0,"update-bot":!0,"create-guest-integration":!0,"update-guest-integration":!0,"create-external-integration":!0,"update-external-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-external-integration":!0,"update-external-integration":!0},label:i()(n.FormattedMessage,{id:"developerIntegrationForm.icon.label",defaultMessage:"Logo"}),subtitle:i()(n.FormattedMessage,{id:"developerIntegrationForm.icon.subtitle",defaultMessage:"512px x 512px in PNG format is recommended."})},space:{supportedBy:{"create-bot":!0,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-external-integration":!1,"update-external-integration":!1},requiredBy:{"create-bot":!0,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-external-integration":!1,"update-external-integration":!1},label:i()(n.FormattedMessage,{id:"developerIntegrationForm.space.label",defaultMessage:"Associated workspace"}),subtitle:i()(n.FormattedMessage,{id:"developerIntegrationForm.space.subtitle",defaultMessage:"Select a workspace to install the integration to. You can upgrade the integration to use OAuth later."})},developer_space:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-external-integration":!0,"update-external-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-external-integration":!1,"update-external-integration":!1},label:i()(n.FormattedMessage,{id:"developerIntegrationForm.developerSpace.label",defaultMessage:"Associated workspace"}),subtitle:i()(n.FormattedMessage,{id:"developerIntegrationForm.developerSpace.subtitle",defaultMessage:"Select a workspace to install the integration to for development. Once approved it will become available to all users."})},submission_type:{supportedBy:{"create-bot":e,"update-bot":!0,"create-guest-integration":!0,"update-guest-integration":!1,"create-external-integration":e,"update-external-integration":!1},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-external-integration":!1,"update-external-integration":!1},label:i()(n.FormattedMessage,{id:"developerIntegrationForm.submissionType.label",defaultMessage:"Integration type"})},redirect_uris:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-external-integration":!1,"update-external-integration":!1},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-external-integration":!1,"update-external-integration":!1},label:i()(n.FormattedMessage,{id:"developerIntegrationForm.redirect_uris.label",defaultMessage:"Redirect URIs"}),subtitle:i()(n.FormattedMessage,{id:"developerIntegrationForm.redirect_uri.subtitle",defaultMessage:"In the Notion OAuth flow, users will be redirected to this path after they have authenticated with Notion. The path will be appended with the authorization code for access and must have a protocol. It can’t contain URL fragments, relative paths or wildcards, and can’t be a public IP address. It must also be included in the token request."})},website_url:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-external-integration":!0,"update-external-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-external-integration":!0,"update-external-integration":!0},label:i()(n.FormattedMessage,{id:"developerIntegrationForm.website_url.label",defaultMessage:"Website or homepage"}),subtitle:i()(n.FormattedMessage,{id:"developerIntegrationForm.website_url.subtitle",defaultMessage:"Used to link to your integration’s website or homepage in your integration page and authentication screens."})},tagline:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-external-integration":!0,"update-external-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-external-integration":!1,"update-external-integration":!1},label:i()(n.FormattedMessage,{id:"developerIntegrationForm.tagline.label",defaultMessage:"Tagline"}),subtitle:i()(n.FormattedMessage,{id:"developerIntegrationForm.tagline.subtitle",defaultMessage:"A short description of what the integration does."})},privacy_policy_url:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-external-integration":!0,"update-external-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-external-integration":!0,"update-external-integration":!0},label:i()(n.FormattedMessage,{id:"developerIntegrationForm.privacy_policy_url.label",defaultMessage:"Privacy policy"}),subtitle:i()(n.FormattedMessage,{id:"developerIntegrationForm.privacy_policy_url.subtitle",defaultMessage:"Used to link to your integration’s privacy policy in your integration page and authentication screens."})},terms_of_use_url:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-external-integration":!0,"update-external-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-external-integration":!0,"update-external-integration":!0},label:i()(n.FormattedMessage,{id:"developerIntegrationForm.terms_of_use_url.label",defaultMessage:"Terms of use"}),subtitle:i()(n.FormattedMessage,{id:"developerIntegrationForm.terms_of_use_url.subtitle",defaultMessage:"Used to link to your integration’s terms of use in your integration page and authentication screens."})},email:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-external-integration":!0,"update-external-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-external-integration":!0,"update-external-integration":!0},label:i()(n.FormattedMessage,{id:"developerIntegrationForm.email.label",defaultMessage:"Support email"}),subtitle:i()(n.FormattedMessage,{id:"developerIntegrationForm.email.subtitle",defaultMessage:"Used to link to your integration’s support email in your integration page and authentication screens."})},capabilities:{supportedBy:{"create-bot":!0,"update-bot":!0,"create-guest-integration":!0,"update-guest-integration":!0,"create-external-integration":!1,"update-external-integration":!1},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-external-integration":!1,"update-external-integration":!1},label:i()(n.FormattedMessage,{id:"developerIntegrationForm.capabilities.label",defaultMessage:"Capabilities"}),caption:i()(n.FormattedMessage,{id:"developerIntegrationForm.capabilities.caption",defaultMessage:"These requested capabilities will be displayed to users when they authorize your integration. See <inlinetextlink>developer docs</inlinetextlink> for more help.",values:{inlinetextlink:(...e)=>i()(c.Z,{href:"https://developers.notion.com/docs/authorization"},void 0,e)}})},developer_name:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-external-integration":!0,"update-external-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-external-integration":!0,"update-external-integration":!0},label:i()(n.FormattedMessage,{id:"developerIntegrationForm.developerName.label",defaultMessage:"Company name"}),caption:i()(n.FormattedMessage,{id:"developerIntegrationForm.developerName.caption",defaultMessage:"The name of your company or organization. You may use your own name if this does not apply."})},unfurl_url:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-external-integration":!1,"update-external-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-external-integration":!1,"update-external-integration":!1},label:i()(n.FormattedMessage,{id:"developerIntegrationForm.unfurlUrl.label",defaultMessage:"Unfurl Callback URL"}),caption:i()(n.FormattedMessage,{id:"developerIntegrationForm.unfurlUrl.caption",defaultMessage:"Called with a POST request when an unfurl action occurs and with a DELETE request when unfurl uri preview(s) or mention(s) is deleted."})},domain:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-external-integration":!1,"update-external-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-external-integration":!1,"update-external-integration":!0},label:i()(n.FormattedMessage,{id:"developerIntegrationForm.domain.label",defaultMessage:"Unfurl Url Domain"}),caption:i()(n.FormattedMessage,{id:"developerIntegrationForm.domain.caption",defaultMessage:"Domain for URLs to unfurl with this integration. Domains will be verified before publishing to users."})},regex_pattern:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-external-integration":!1,"update-external-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-external-integration":!1,"update-external-integration":!0},label:i()(n.FormattedMessage,{id:"developerIntegrationForm.regexPattern.label",defaultMessage:"Unfurl Regex Pattern"}),caption:i()(n.FormattedMessage,{id:"developerIntegrationForm.regexPattern.caption",defaultMessage:"When user's paste a URL that matches this pattern, they'll have the option to unfurl with this integration."})},regex_attributes:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-external-integration":!1,"update-external-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-external-integration":!1,"update-external-integration":!0},label:i()(n.FormattedMessage,{id:"developerIntegrationForm.regexAttributes.label",defaultMessage:"Unfurl Regex Attributes"}),caption:i()(n.FormattedMessage,{id:"developerIntegrationForm.regexAttributes.caption",defaultMessage:"Extract out attributes from the regex. Allows you to create placeholder content before the unfurl completes."})},external_oauth_authorize_url:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-external-integration":!0,"update-external-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-external-integration":!0,"update-external-integration":!1},label:i()(n.FormattedMessage,{id:"developerIntegrationForm.external_oauth_authorize_url.label",defaultMessage:"OAuth Authorize URL"}),caption:i()(n.FormattedMessage,{id:"developerIntegrationForm.external_oauth_authorize_url.caption",defaultMessage:"Used by Notion to initiate user authorization with the integration."})},external_oauth_token_url:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-external-integration":!0,"update-external-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-external-integration":!0,"update-external-integration":!1},label:i()(n.FormattedMessage,{id:"developerIntegrationForm.external_oauth_token_url.label",defaultMessage:"OAuth Token URL"}),caption:i()(n.FormattedMessage,{id:"developerIntegrationForm.external_oauth_token_url.caption",defaultMessage:"Called by Notion to retrieve an access token for the unfurl callback URL."})},external_oauth_scopes:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-external-integration":!0,"update-external-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-external-integration":!1,"update-external-integration":!1},label:i()(n.FormattedMessage,{id:"developerIntegrationForm.external_oauth_scopes.label",defaultMessage:"OAuth Scopes (Optional)"}),caption:i()(n.FormattedMessage,{id:"developerIntegrationForm.external_oauth_scopes.caption",defaultMessage:"Optional scopes string"})},external_client_id:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-external-integration":!0,"update-external-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-external-integration":!0,"update-external-integration":!1},label:i()(n.FormattedMessage,{id:"developerIntegrationForm.external_client_id.label",defaultMessage:"OAuth Client ID"})},external_client_secret:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-external-integration":!0,"update-external-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-external-integration":!0,"update-external-integration":!1},label:i()(n.FormattedMessage,{id:"developerIntegrationForm.external_client_secret.label",defaultMessage:"OAuth Client Secret"})}}}const h={value:void 0,error:void 0},x={token:h,client_id:h,client_secret:h,name:h,icon:h,space:h,developer_space:h,submission_type:h,tagline:h,email:h,website_url:h,privacy_policy_url:h,terms_of_use_url:h,redirect_uris:h,capabilities:h,developer_name:h,unfurl_url:h,domain:h,regex_pattern:h,regex_attributes:h,external_oauth_authorize_url:h,external_oauth_token_url:h,external_client_id:h,external_client_secret:h,external_oauth_scopes:h};function M(e,t){return"error"in t?{...e,[t.field]:{...e[t.field],error:t.error}}:{...e,[t.field]:{...e[t.field],...t.value&&{error:void 0},value:t.value}}}function F(e){const{userRootStore:t,formStoreState:a}=e;if("create-bot"===a.type){return{token:void 0,client_id:void 0,client_secret:void 0,space:(t?t.getAdminSpaceStores():[])[0],submission_type:a.recordTypeOnSubmission,developer_name:void 0,tagline:void 0,email:void 0,website_url:void 0,privacy_policy_url:void 0,terms_of_use_url:void 0,redirect_uris:void 0,capabilities:{read_content:!0,insert_content:!0,update_content:!0,read_user_with_email:!0,read_user_without_email:!0},unfurl_url:void 0,domain:void 0,regex_pattern:void 0,regex_attributes:void 0,external_oauth_authorize_url:void 0,external_oauth_token_url:void 0,external_client_id:void 0,external_client_secret:void 0,external_oauth_scopes:void 0}}if("update-bot"===a.type||"create-guest-integration"===a.type){const e=a.startingRecord.value,r=t&&s.Z.createChildStore(t,{id:e.space_id,table:d.bx});return{token:a.startingRecord,client_id:void 0,client_secret:void 0,name:e.name,icon:e.icon,space:r,developer_space:void 0,submission_type:a.recordTypeOnSubmission,tagline:void 0,email:void 0,website_url:void 0,privacy_policy_url:void 0,terms_of_use_url:void 0,redirect_uris:void 0,capabilities:k(e.capabilities),developer_name:void 0,unfurl_url:void 0,domain:void 0,regex_pattern:void 0,regex_attributes:void 0,external_oauth_authorize_url:void 0,external_oauth_token_url:void 0,external_client_id:void 0,external_client_secret:void 0,external_oauth_scopes:void 0}}if("update-guest-integration"===a.type){const e=a.startingRecord.value;return{token:void 0,client_id:a.startingRecord,client_secret:a.startingRecord,name:e.name,icon:e.info.icon,space:void 0,developer_space:void 0,submission_type:a.recordTypeOnSubmission,tagline:e.info.tagline,email:e.info.email,website_url:e.info.website_url,privacy_policy_url:e.info.privacy_policy_url,terms_of_use_url:e.info.terms_of_use_url,redirect_uris:e.redirect_uris,capabilities:k(e.capabilities),developer_name:e.info.developer_name,unfurl_url:void 0,domain:void 0,regex_pattern:void 0,regex_attributes:void 0,external_oauth_authorize_url:void 0,external_oauth_token_url:void 0,external_client_id:void 0,external_client_secret:void 0,external_oauth_scopes:void 0}}if("create-external-integration"===a.type){return{token:void 0,client_id:void 0,client_secret:void 0,space:void 0,developer_space:(t?t.getAdminSpaceStores():[])[0],submission_type:a.recordTypeOnSubmission,tagline:void 0,email:void 0,website_url:void 0,privacy_policy_url:void 0,terms_of_use_url:void 0,redirect_uris:void 0,capabilities:void 0,developer_name:void 0,unfurl_url:void 0,domain:f.nZ,regex_pattern:f.e_,regex_attributes:f.P4,external_oauth_authorize_url:void 0,external_oauth_token_url:void 0,external_client_id:void 0,external_client_secret:void 0,external_oauth_scopes:void 0}}if("update-external-integration"===a.type){var r,i,n;const e=a.startingRecord.value,o=null===(r=a.startingAuthRecord)||void 0===r?void 0:r.value,l=e.info.developer_space_id,u=l&&t?s.Z.createChildStore(t,{id:l,table:d.bx}):void 0,c=null===(i=e.info.original_url_patterns)||void 0===i?void 0:i[0];return{token:void 0,client_id:a.startingRecord,client_secret:a.startingRecord,name:e.name,icon:e.info.icon,space:void 0,developer_space:u,submission_type:a.recordTypeOnSubmission,tagline:e.info.tagline,email:e.info.email,website_url:e.info.website_url,privacy_policy_url:e.info.privacy_policy_url,terms_of_use_url:e.info.terms_of_use_url,redirect_uris:e.redirect_uris,capabilities:void 0,developer_name:e.info.developer_name,domain:null===(n=e.info.original_url_domains)||void 0===n?void 0:n[0],regex_pattern:null==c?void 0:c.regex,regex_attributes:((null==c?void 0:c.attributes)||[]).map(g.Ah),unfurl_url:e.info.unfurl_url,external_oauth_authorize_url:null==o?void 0:o.oauth_authorize_url,external_oauth_token_url:null==o?void 0:o.oauth_token_url,external_client_id:null==o?void 0:o.client_id,external_client_secret:null==o?void 0:o.client_secret,external_oauth_scopes:null==o?void 0:o.scopes}}(0,l.t1)(a)}function I(e){const{formData:t,formStateType:a}=e,r=[],i=y();for(const n of(0,l.Yd)(i)){const e=t[n].value;i[n].requiredBy[a]&&!e&&r.push(n)}return r}function S(e){const{formData:t,formStateType:a}=e,r=[];for(const i of(0,l.Yd)(t)){const e=t[i].value,n=y()[i].supportedBy[a],o=m.tV[i];if(n&&e&&o){const t=o(e);t.validated||r.push({fieldName:i,errorMessage:t.errorMessageDescriptor})}}return r}function w(e){const{formData:t,formStateType:a}=e;return(0,l.Yd)(t).some((e=>y()[e].supportedBy[a]&&t[e].error))}function k(e){const t={read_content:!1,update_content:!1,insert_content:!1,read_user_without_email:!1,read_user_with_email:!1};return e&&Object.entries(e).forEach((([e,a])=>{a&&(t[e]=!0)})),t}function R(e){if(!e)return;const t={};return Object.entries(e).forEach((([e,a])=>{a&&(t[e]=!0)})),t}function Z(e){return{token:e.token.value,client_id:e.client_id.value,client_secret:e.client_secret.value,name:e.name.value,icon:e.icon.value,space:e.space.value,submission_type:e.submission_type.value,redirect_uris:(e.redirect_uris.value||[]).map((e=>m.FR(e))),website_url:m.FR(e.website_url.value),tagline:e.tagline.value,privacy_policy_url:m.FR(e.privacy_policy_url.value),terms_of_use_url:m.FR(e.terms_of_use_url.value),email:u.H3(e.email.value),capabilities:R(e.capabilities.value),developer_name:e.developer_name.value,developer_space:e.developer_space.value,unfurl_url:e.unfurl_url.value,domain:e.domain.value,regex_pattern:e.regex_pattern.value,regex_attributes:e.regex_attributes.value,external_oauth_authorize_url:m.FR(e.external_oauth_authorize_url.value),external_oauth_token_url:m.FR(e.external_oauth_token_url.value),external_client_id:e.external_client_id.value,external_client_secret:e.external_client_secret.value,external_oauth_scopes:e.external_oauth_scopes.value}}},91996:(e,t,a)=>{a.d(t,{Jv:()=>g,FR:()=>v,tV:()=>f});a(33948);var r=a(5366),i=a(74181),n=a(95477),o=a(64002),s=a(33728),l=a(89602),d=a(36054),u=a(44876),c=a(20270);const p=(0,r.defineMessages)({contentCapabilityErrorMessage:{id:"developerIntegrationsCreate.error.capabilities.invalidContent",defaultMessage:"At least one content capability must be requested."}});function g(e){let t;try{t=JSON.parse(e)}catch(a){t=void 0}return t}function m(e){const t=o.yn(e);if(!t)return{validated:!1};return o.Qc(t).hostname?{validated:!0}:{validated:!1}}function v(e){const t=o.yn(e);if(!t||!e)return;const a=t[t.length-1],r=e[e.length-1];return"/"===a&&"/"!==r?t.slice(0,t.length-1):t}const f={email:function(e){const t=s.H3(e);return t?{validated:s.oH(t).valueOf()}:{validated:!1}},redirect_uris:function(e){return{validated:e.every((e=>(0,i.mb)(n.default.domainBaseUrl,e)))}},website_url:m,privacy_policy_url:m,terms_of_use_url:m,capabilities:function(e){return e.read_content||e.insert_content||e.update_content?{validated:!0}:{validated:!1,errorMessageDescriptor:p.contentCapabilityErrorMessage}},unfurl_url:m,regex_pattern:function(e){try{return new RegExp(e),{validated:!0}}catch{return{validated:!1}}},regex_attributes:function(e){if((0,d.Gu)(l.$1,e))return{validated:!1};for(const t of e){const e=(0,u.GY)(t);if(!(0,c.nj)(e))return{validated:!1}}return{validated:!0}},external_oauth_authorize_url:m,external_oauth_token_url:m}},65270:(e,t,a)=>{a.d(t,{TG:()=>m,rn:()=>v,C:()=>f,Az:()=>b,nZ:()=>_,e_:()=>y,P4:()=>h,SV:()=>x,VR:()=>I,Hx:()=>S});a(99244),a(33948);var r=a(41432),i=a(20270),n=a(4615),o=a(21202),s=a(19889),l=a(70203),d=a(97880),u=a(44876),c=a(63143),p=a(9714),g=a(74597);function m(e){return(0,c.jj)(e.flatMap((e=>{if("relation"===e.type)return e.relation.uri})).filter(d.$K))}function v(e){const{environment:t,integration:a,rootUrl:d,rootAttributes:c,relatedUrisToAttributes:m}=e,v=(0,n.ZP)(),f=t.currentUser.id,b=new g.Z,_=[],y={};for(const[r,i]of Object.entries(m)){const e=(0,n.ZP)();_.push({id:e,uri:r,attributes:i}),y[r]=e}const h=[{id:"rootInstanceId",original_url:d,attributes:c,related_external_object_uris_to_instance_ids:y},..._].map((e=>{const t=[];for(const a of e.attributes){const e=(0,u.GY)(a);(0,i.nj)(e)&&t.push(e)}return{...e,attributes:t}}));if("success"!==(0,u.ny)(d,[a]).type)return{error:"Sample URL does not match provided integration regex."};const x={table:o.iU,id:(0,n.ZP)(),spaceId:v};let M;for(const i of h){const e={table:o.iU,id:i.id,spaceId:v},t={...i,domain:"test"},a={id:i.id,type:r.ZP.externalObjectInstance,version:0,created_at:0,created_by_table:s.KJ,created_by_id:(0,n.ZP)(),last_edited_time:0,last_edited_by_table:s.KJ,last_edited_by_id:(0,n.ZP)(),parent_table:o.iU,parent_id:(0,n.ZP)(),space_id:v,alive:!0,domain:"",format:t};if(b.setRecord({pointer:e,userId:f},{role:"editor",value:a}),i===h[0]){const r={...a,format:{...t,attributes:void 0}};b.setRecord({pointer:x,userId:f},{role:"editor",value:r}),M=e}}if(!M)return{error:"Root external object was not defined."};const F=new p.Z(t,x,{inMemoryRecordCache:b}),I=new p.Z(t,M,{inMemoryRecordCache:b}),S={table:o.iU,id:(0,n.ZP)(),spaceId:v},w=new p.Z(t,S,{inMemoryRecordCache:b}),k={id:S.id,type:"text",version:0,space_id:v,parent_id:(0,n.ZP)(),parent_table:o.iU,alive:!0,properties:{title:[(0,l.YC)((0,l.x3)(x.id))]}};b.setRecord({pointer:S,userId:f},{role:"editor",value:k});const R={table:o.iU,id:(0,n.ZP)(),spaceId:v},Z=new p.Z(t,R,{inMemoryRecordCache:b}),T={id:R.id,type:"text",version:0,space_id:v,parent_id:(0,n.ZP)(),parent_table:o.iU,alive:!0,properties:{title:[(0,l.YC)((0,l.x3)(h[0].id))]}};return b.setRecord({pointer:R,userId:f},{role:"editor",value:T}),{emptyInstanceBlockStore:F,previewBlockStore:I,emptyInlineBlockStore:w,inlineBlockStore:Z}}const f=(0,n.ZP)(),b="https://acme.com/items/23487",_="acme.com",y="^(?<site>https\\:\\/\\/acme\\.com)\\/items\\/(?<itemNo>\\d+)$",h=[{id:"title",name:"Title",type:"inline",inline:{title:{value:"Acme Item #$<itemNo>",section:"title"}}},{id:"itemId",name:"Item Id",type:"inline",inline:{plain_text:{value:"#$<itemNo>",section:"identifier"}}},{id:"site",name:"Site",type:"inline",inline:{plain_text:{value:"$<site>",section:"secondary"}}}],x=[{id:"title",name:"Title",type:"inline",inline:{title:{value:"Feature Request: Link Previews",section:"title"}}},{id:"state",name:"State",type:"relation",relation:{uri:"acme:item_state/open",mention:{section:"primary"}}},{id:"itemId",name:"Item Id",type:"inline",inline:{plain_text:{value:"#23487",section:"identifier"}}},{id:"itemIcon",name:"Item Icon",type:"inline",inline:{color:{value:{r:247,g:247,b:42},section:"entity"}}},{id:"user",name:"User",type:"relation",relation:{uri:"https://acme.com/fig-ment",extension:[{id:"title",section:"secondary"},{id:"avatar_url",section:"avatar"}]}},{id:"description",name:"Description",type:"inline",inline:{plain_text:{value:"Would love to be able to preview some Acme resources in Notion!\n Maybe an open item?",section:"body"}}},{id:"updated_at",name:"Updated At",type:"inline",inline:{datetime:{value:"2022-01-11T19:53:18.829Z",section:"secondary"}}},{id:"label",name:"Label",type:"inline",inline:{enum:{value:"🔨 Ready to Build",color:{r:100,g:100,b:100},section:"primary"}}}],M={uri:"https://acme.com/fig-ment",attributes:[{id:"title",name:"User Name",type:"inline",inline:{title:{value:"fig"}}},{id:"avatar_url",name:"Avatar URL",type:"embed",embed:{src_url:"https://avatars.githubusercontent.com/u/93556354?s=88&u=4967f0be0900684b6963a953ca7fe0ff2268746f&v=4",image:{}}}]},F={uri:"acme:item_state/open",attributes:[{id:"title",name:"Title",type:"inline",inline:{title:{value:"Open",section:"title"}}},{id:"icon",name:"Icon",type:"embed",embed:{src_url:"/images/external_integrations/acme-icon.png",image:{section:"avatar"}}},{id:"color",name:"Color",type:"inline",inline:{color:{value:{r:235,g:64,b:52},section:"background"}}}]};function I(){const e=[M,F],t=m(x),a={};for(const r of t){const t=e.find((e=>e.uri===r));t&&(a[r]=t.attributes)}return a}function S(e){const{domain:t,regex:a,currentIntegration:r}=e,n={...r.info,original_url_domains:[t],original_url_patterns:[{name:"acme-issue",regex:a,attributes:e.attributes.map((e=>{const t=(0,u.GY)(e);if((0,i.nj)(t))return t})).filter(d.$K)}]};return{...r,info:n}}},85227:(e,t,a)=>{a.d(t,{Z:()=>l});var r=a(77420),i=a(9844),n=a(52016),o=a(97880);class s extends n.Z{getInitialState(){return{type:"create-bot",startingRecord:void 0,recordTypeOnSubmission:"internal"}}updateRecordTypeOnSubmission(e){"create-bot"===this.state.type?"unfurling"===e&&this.setState({type:"create-external-integration",startingRecord:this.state.startingRecord,startingAuthRecord:void 0,recordTypeOnSubmission:e}):"update-bot"===this.state.type?"public"===e&&this.setState({type:"create-guest-integration",startingRecord:this.state.startingRecord,recordTypeOnSubmission:e}):"create-guest-integration"===this.state.type?"internal"===e&&this.setState({type:"update-bot",startingRecord:this.state.startingRecord,recordTypeOnSubmission:e}):"update-guest-integration"===this.state.type||("create-external-integration"===this.state.type?"internal"===e&&this.setState({type:"create-bot",startingRecord:this.state.startingRecord,recordTypeOnSubmission:e}):"update-external-integration"===this.state.type||(0,o.t1)(this.state))}initializeNewForm(e,t){e.table===r.c?this.setState({type:"update-bot",startingRecord:e,recordTypeOnSubmission:"internal"}):e.table===i.K?"external"===e.value.type?this.setState({type:"update-external-integration",startingRecord:{table:e.table,value:e.value},startingAuthRecord:t,recordTypeOnSubmission:"unfurling"}):this.setState({type:"update-guest-integration",startingRecord:{table:e.table,value:e.value},recordTypeOnSubmission:"public"}):(0,o.t1)(e)}}const l=s},89602:(e,t,a)=>{a.d(t,{$1:()=>R});var r=a(14710),i=a(74487);const n=i.Ry({required:{r:i.G(i.eg(i._L(),0),255),g:i.G(i.eg(i._L(),0),255),b:i.G(i.eg(i._L(),0),255)},optional:{}}),o=i.Ry({required:{value:i.G0([i.Z_(),i.v2(i.IX(i.Z_()))])},optional:{section:i.eR(r.kE.avatar,r.kE.identifier,r.kE.primary,r.kE.secondary,r.kE.body)}}),s=i.Ry({required:{value:i.G0([i.O7(),i.v2(i.IX(i.O7()))])},optional:{}}),l=i.Ry({required:{value:i.G0([i.Rx(),i.v2(i.IX(i.Rx()))])},optional:{}}),d=i.Ry({required:{value:i.G0([i.Z_(),i.v2(i.IX(i.Z_()))])},optional:{color:n,section:i.eR(r.kE.primary)}}),u=i.Ry({required:{value:i.G0([i.Z_(),i.bc([i.Z_()])])},optional:{color:n,section:i.i0(r.kE.title)}}),c=i.Ry({required:{value:i.G0([n,i.v2(i.IX(n))])},optional:{section:i.eR(r.kE.entity,r.kE.background)}}),p=i.Ry({required:{value:i.G0([i.ur(),i.v2(i.IX(i.ur()))])},optional:{section:i.eR(r.kE.primary,r.kE.secondary)}}),g=i.Ry({required:{value:i.G0([i.ur(),i.v2(i.IX(i.ur()))])},optional:{section:i.eR(r.kE.primary,r.kE.secondary)}}),m=i.Ry({required:{value:i.G0([i.ur(),i.bc([i.ur()])])},optional:{section:i.eR(r.kE.primary,r.kE.secondary)}}),v=i.Ry({required:{value:i.G0([i.ur(),i.bc([i.ur()])])},optional:{section:i.eR(r.kE.primary,r.kE.secondary)}}),f=i.G0([i.Ry({required:{plain_text:o},optional:{type:i.i0("plain_text")}}),i.Ry({required:{boolean:s},optional:{type:i.i0("boolean")}}),i.Ry({required:{number:l},optional:{type:i.i0("number")}}),i.Ry({required:{enum:d},optional:{type:i.i0("enum")}}),i.Ry({required:{title:u},optional:{type:i.i0("title")}}),i.Ry({required:{color:c},optional:{type:i.i0("color")}}),i.Ry({required:{date:p},optional:{type:i.i0("date")}}),i.Ry({required:{datetime:g},optional:{type:i.i0("datetime")}}),i.Ry({required:{created_time:m},optional:{type:i.i0("created_time")}}),i.Ry({required:{last_edited_time:v},optional:{type:i.i0("last_edited_time")}})]),b=i.Ry({required:{},optional:{section:i.i0(r.kE.embed)}}),_=i.Ry({required:{},optional:{section:i.i0(r.kE.embed)}}),y=i.Ry({required:{},optional:{section:i.i0(r.kE.embed)}}),h=i.Ry({required:{},optional:{section:i.i0(r.kE.embed)}}),x=i.Ry({required:{},optional:{format:i.AG(i.eR("icon")),section:i.eR(r.kE.avatar,r.kE.entity,r.kE.embed)}}),M=i.jV([i.Ry({required:{src_url:i.G0([i.Z_(),i.v2(i.IX(i.Z_()))])},optional:{}}),i.G0([i.Ry({required:{html:b},optional:{type:i.i0("html")}}),i.Ry({required:{pdf:_},optional:{type:i.i0("pdf")}}),i.Ry({required:{audio:y},optional:{type:i.i0("audio")}}),i.Ry({required:{video:h},optional:{type:i.i0("video")}}),i.Ry({required:{image:x},optional:{type:i.i0("image")}})])]),F=i.G0([i.Z_(),i.v2(i.IX(i.Z_()))]),I=i.Ry({required:{uri:F},optional:{type:i.i0("mention"),mention:i.Ry({required:{},optional:{section:i.i0(r.kE.primary)}}),extension:i.Ft()}}),S=i.Ry({required:{uri:F},optional:{type:i.i0("extension"),extension:i.v2(i.IX(i.Ry({required:{id:i.Z_()},optional:{section:i.eR(r.kE.avatar,r.kE.embed,r.kE.primary,r.kE.secondary)}}))),mention:i.Ft()}}),w=i.G0([I,S]),k=i.jV([i.Ry({required:{id:i.Z_(),name:i.Z_()},optional:{}}),i.G0([i.Ry({required:{inline:f},optional:{type:i.i0("inline")}}),i.Ry({required:{embed:M},optional:{type:i.i0("embed")}}),i.Ry({required:{relation:w},optional:{type:i.i0("relation")}})])]),R=i.IX(k)}}]);